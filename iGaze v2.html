<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>iGaze ‚Äî Demo Board</title>
  <style>
    :root{
      --nav:#0f3e5c;
      --navText:#ffffff;

      /* Blue/white gradient aesthetic */
      --bg1:#f6fbff;
      --bg2:#e7f3ff;
      --card:#ffffff;
      --cardBorder:#e8eef5;
      --shadow: 0 10px 30px rgba(15, 62, 92, .12);

      --text:#0b1b2a;
      --muted:#5a6b7b;

      --radius:16px;
      --tileRadius:18px;

      /* Tile colors (better meaning mapping) */
      --yes:#38c172;      /* green */
      --no:#e3342f;       /* red */
      --stop:#c81e1e;     /* deeper red */
      --please:#8b5cf6;   /* purple */
      --food:#f59e0b;     /* orange */
      --drink:#3b82f6;    /* blue */
      --more:#14b8a6;     /* teal */
      --less:#64748b;     /* slate */

      --tileText:#ffffff;
      --tileBorder:#d8e4f2;
      --focus: rgba(59,130,246,.35);
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      background: radial-gradient(1000px 700px at 30% 0%, #d7eeff 0%, var(--bg1) 45%, var(--bg2) 100%) fixed;
    }

    /* ===== Top nav (like your classmate‚Äôs) ===== */
    .nav{
      background: var(--nav);
      color: var(--navText);
      padding: 14px 18px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      font-weight:900;
      letter-spacing:.2px;
    }
    .logo{
      width:34px;height:34px;border-radius:10px;
      background: linear-gradient(135deg, #67e8f9, #60a5fa);
      box-shadow: 0 8px 18px rgba(0,0,0,.15);
    }
    .navlinks{
      display:flex;
      align-items:center;
      gap:18px;
      font-weight:800;
    }
    .navlinks a{
      color: var(--navText);
      text-decoration:none;
      opacity:.95;
      padding: 4px 2px;
      border-bottom: 2px solid transparent;
    }
    .navlinks a:hover{ opacity: 1; }
    .navlinks a.active{ border-bottom-color: #fbbf24; }

    .wrap{
      max-width: 1100px;
      margin: 18px auto 30px;
      padding: 0 14px;
    }

    /* ===== Hero panel ===== */
    .hero{
      margin-top: 16px;
      background: linear-gradient(135deg, #0f3e5c 0%, #2e8bc0 100%);
      color: #fff;
      border-radius: var(--radius);
      padding: 28px 22px;
      box-shadow: var(--shadow);
      text-align:center;
    }
    .hero h1{
      margin: 0 0 8px;
      font-size: clamp(22px, 3.2vw, 34px);
      letter-spacing:.2px;
    }
    .hero p{
      margin: 0 auto;
      max-width: 760px;
      font-size: 14px;
      line-height: 1.45;
      color: rgba(255,255,255,.9);
    }
    .heroActions{
      margin-top: 14px;
      display:flex;
      gap:10px;
      justify-content:center;
      flex-wrap:wrap;
    }
    .btn{
      appearance:none;
      border: 1px solid rgba(255,255,255,.35);
      background: rgba(255,255,255,.14);
      color:#fff;
      padding: 10px 14px;
      border-radius: 999px;
      font-weight: 900;
      cursor:pointer;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      gap:8px;
    }
    .btn:hover{ background: rgba(255,255,255,.18); }
    .btn.primary{
      border-color: rgba(255,255,255,.0);
      background: #ffffff;
      color: #0f3e5c;
    }
    .btn.primary:hover{ filter: brightness(0.98); }

    /* ===== Instruction card ===== */
    .card{
      background: var(--card);
      border: 1px solid var(--cardBorder);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 16px;
      margin-top: 14px;
    }
    .card h2{
      margin: 0 0 8px;
      font-size: 18px;
    }
    .muted{ color: var(--muted); }

    .instructions{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap: 14px;
      align-items:start;
    }
    .steps{
      margin:0;
      padding-left: 18px;
      color: var(--muted);
      line-height:1.6;
      font-weight:700;
      font-size: 13px;
    }
    .tipbox{
      border: 1px dashed #cfe2f7;
      background: #f3f9ff;
      border-radius: 14px;
      padding: 12px;
      color: #27445c;
      font-weight: 800;
      font-size: 13px;
    }

    /* ===== Layout: Board + Keyboard ===== */
    .layout{
      margin-top: 14px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
    }

    /* ===== Sentence bar ===== */
    .sentenceRow{
      display:flex;
      gap:10px;
      align-items:stretch;
      flex-wrap:wrap;
    }
    .sentence{
      flex: 1;
      min-height: 70px;
      border-radius: 14px;
      border: 1px solid #dbe7f6;
      background: linear-gradient(180deg, #ffffff 0%, #f4f9ff 100%);
      padding: 10px;
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
    }
    .placeholder{
      color:#6b7f93;
      font-weight: 900;
    }
    .chip{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid #dbe7f6;
      background:#ffffff;
      font-weight: 950;
      text-transform: lowercase;
    }
    .mini{
      width:24px;height:24px;border-radius:8px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      background:#eaf3ff;
    }

    .controls{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
    }
    .ctrlBtn{
      border: 1px solid #dbe7f6;
      background: #ffffff;
      color: #0f3e5c;
      border-radius: 999px;
      padding: 10px 14px;
      cursor:pointer;
      font-weight: 950;
      display:inline-flex;
      gap:8px;
      align-items:center;
    }
    .ctrlBtn:hover{ background:#f3f9ff; }
    .ctrlBtn:active{ transform: translateY(1px); }

    /* ===== Tiles ===== */
    .grid{
      margin-top: 12px;
      display:grid;
      grid-template-columns: repeat(4, minmax(140px, 1fr));
      gap: 12px;
    }

    .tile{
      border-radius: var(--tileRadius);
      border: 2px solid var(--tileBorder);
      min-height: 140px;
      cursor:pointer;
      box-shadow: 0 8px 18px rgba(15, 62, 92, .10);
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap:10px;
      user-select:none;
      transition: transform .08s ease, filter .08s ease, box-shadow .08s ease;
      outline:none;
      color: var(--tileText);
      font-weight: 1000;
      letter-spacing:.2px;
      position:relative;
    }
    .tile:hover{
      transform: translateY(-1px);
      filter: brightness(1.03);
      box-shadow: 0 10px 22px rgba(15, 62, 92, .14);
    }
    .tile:active{ transform: translateY(1px); }
    .tile:focus-visible{
      outline: 5px solid var(--focus);
      outline-offset: 3px;
    }
    .tile .icon{ font-size: 46px; line-height:1; }
    .tile .label{ font-size: 22px; text-transform: lowercase; }

    .yes{ background: var(--yes); }
    .no{ background: var(--no); }
    .stop{ background: var(--stop); }
    .please{ background: var(--please); }
    .food{ background: var(--food); }
    .drink{ background: var(--drink); }
    .more{ background: var(--more); }
    .less{ background: var(--less); }

    /* ===== Autocomplete panel ===== */
    .suggestions{
      margin-top: 12px;
      border: 1px solid #dbe7f6;
      background: #f7fbff;
      border-radius: 14px;
      padding: 10px;
    }
    .suggestionsHeader{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom: 8px;
    }
    .suggestionsHeader .title{
      font-weight: 1000;
      color:#0f3e5c;
    }
    .suggestionsHeader .small{
      font-size:12px;
      color:#5a6b7b;
      font-weight:800;
    }
    .suggestList{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    .suggest{
      border: 1px solid #cfe2f7;
      background: #ffffff;
      border-radius: 999px;
      padding: 10px 12px;
      cursor:pointer;
      font-weight: 950;
      color:#0f3e5c;
      display:inline-flex;
      gap:8px;
      align-items:center;
    }
    .suggest:hover{ background:#eef7ff; }

    /* ===== Keyboard ===== */
    .kbd{
      margin-top: 12px;
      display:grid;
      gap:10px;
    }
    .kbdRow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    .key{
      flex: 1;
      min-width: 44px;
      border-radius: 14px;
      border: 1px solid #dbe7f6;
      background: #ffffff;
      padding: 12px 10px;
      text-align:center;
      cursor:pointer;
      font-weight: 1000;
      color:#0f3e5c;
      box-shadow: 0 6px 14px rgba(15, 62, 92, .08);
      user-select:none;
    }
    .key:hover{ background:#f3f9ff; }
    .key:active{ transform: translateY(1px); }
    .key.wide{ flex: 2; }
    .key.xwide{ flex: 3; }

    /* ===== Responsive ===== */
    @media (max-width: 980px){
      .instructions{ grid-template-columns: 1fr; }
      .layout{ grid-template-columns: 1fr; }
      .grid{ grid-template-columns: repeat(2, minmax(140px, 1fr)); }
    }
  </style>
</head>

<body>
  <header class="nav">
    <div class="brand">
      <div class="logo" aria-hidden="true"></div>
      <div>iGaze</div>
    </div>
    <nav class="navlinks" aria-label="Navigation">
      <a class="active" href="#">Home</a>
      <a href="about.html">About</a>
      <a href="about.html#contact">Contact</a>
    </nav>
  </header>

  <main class="wrap">
    <section class="hero">
      <h1>Empowering Communication Through Eye Tracking</h1>
      <p>Use the large tiles and on-screen keyboard to build a message. This demo uses mouse clicks today‚Äîlater your team can map gaze + blink to the same selection events.</p>
      <div class="heroActions">
        <a class="btn primary" href="about.html">Learn more about iGaze ‚Üí</a>
        <button class="btn" id="btnSpeakHero" type="button">üîä Speak message</button>
      </div>
    </section>

    <section class="card">
      <div class="instructions">
        <div>
          <h2>Quick Instructions</h2>
          <ol class="steps">
            <li><b>Select tiles</b> (Yes/No/Stop/Please/Food/Drink/More/Less) to add words to the message bar.</li>
            <li>Use the <b>keyboard</b> to type extra words (names, places, custom needs).</li>
            <li>Tap a <b>suggestion</b> to auto-fill common phrases.</li>
            <li>Press <b>Speak</b> to hear the message (browser voice in this demo).</li>
          </ol>
        </div>
        <div class="tipbox">
          Tip: In the final build, your eye-tracking layer can ‚Äúclick‚Äù a tile after a dwell time or blink.
          This UI is already structured so gaze selection can trigger the same events as a mouse click.
        </div>
      </div>
    </section>

    <section class="layout">
      <!-- LEFT: Communication board -->
      <section class="card" aria-label="Communication board">
        <h2 style="margin:0 0 10px;">Demo Board</h2>

        <div class="sentenceRow">
          <div class="sentence" id="sentence" aria-live="polite">
            <span class="placeholder" id="placeholder">Select a tile or type with the keyboard‚Ä¶</span>
          </div>

          <div class="controls">
            <button class="ctrlBtn" id="btnSpeak" type="button">üîä Speak</button>
            <button class="ctrlBtn" id="btnUndo" type="button">‚Ü© Undo</button>
            <button class="ctrlBtn" id="btnClear" type="button">üßπ Clear</button>
          </div>
        </div>

        <div class="grid" id="grid">
          <button class="tile yes" data-word="yes" type="button"><div class="icon">‚úÖ</div><div class="label">yes</div></button>
          <button class="tile no" data-word="no" type="button"><div class="icon">‚ùå</div><div class="label">no</div></button>
          <button class="tile stop" data-word="stop" type="button"><div class="icon">üõë</div><div class="label">stop</div></button>
          <button class="tile please" data-word="please" type="button"><div class="icon">üôè</div><div class="label">please</div></button>

          <button class="tile food" data-word="food" type="button"><div class="icon">üçé</div><div class="label">food</div></button>
          <button class="tile drink" data-word="drink" type="button"><div class="icon">üíß</div><div class="label">drink</div></button>
          <button class="tile more" data-word="more" type="button"><div class="icon">‚ûï</div><div class="label">more</div></button>
          <button class="tile less" data-word="less" type="button"><div class="icon">‚ûñ</div><div class="label">less</div></button>
        </div>

        <div class="suggestions" aria-label="Auto fill suggestions">
          <div class="suggestionsHeader">
            <div class="title">Auto Fill</div>
            <div class="small">Tap to insert a phrase</div>
          </div>
          <div class="suggestList" id="suggestList">
            <!-- suggestions inserted by JS -->
          </div>
        </div>
      </section>

      <!-- RIGHT: Keyboard -->
      <section class="card" aria-label="On-screen keyboard">
        <h2 style="margin:0 0 10px;">Keyboard</h2>
        <p class="muted" style="margin:0 0 10px;font-weight:800;">
          Click letters to type. Use Space / Backspace / Enter (Enter adds the typed word).
        </p>

        <div class="kbd" id="kbd"></div>

        <div class="suggestions" style="margin-top:14px;">
          <div class="suggestionsHeader">
            <div class="title">Typed Text</div>
            <div class="small">Press Enter to add</div>
          </div>
          <div class="sentence" id="typedBox" style="min-height:64px;"></div>
        </div>
      </section>
    </section>
  </main>

  <script>
// ===== AWS API base URL (API Gateway) =====
  const API_BASE = "arn:aws:execute-api:us-east-2:606876783814:btzjvmv1cg/*/OPTIONS/";
    
    // ===== State =====
    const phrase = [];              // array of words (chips)
    let typed = "";                 // typed buffer

    const sentenceEl = document.getElementById("sentence");
    const placeholderEl = document.getElementById("placeholder");
    const typedBoxEl = document.getElementById("typedBox");
    const suggestListEl = document.getElementById("suggestList");

    const btnSpeak = document.getElementById("btnSpeak");
    const btnUndo  = document.getElementById("btnUndo");
    const btnClear = document.getElementById("btnClear");
    const btnSpeakHero = document.getElementById("btnSpeakHero");

    // ===== Auto-fill suggestions (simple + relevant to your 8 tiles) =====
    // You can expand this later or generate dynamically.
    const suggestions = [
      "please help",
      "more please",
      "less please",
      "stop please",
      "food please",
      "drink please",
      "yes please",
      "no thank you"
    ];

    function renderSuggestions(){
      suggestListEl.innerHTML = "";
      for (const s of suggestions){
        const b = document.createElement("button");
        b.className = "suggest";
        b.type = "button";
        b.innerHTML = "‚ú® " + s;
        b.addEventListener("click", () => insertPhrase(s));
        suggestListEl.appendChild(b);
      }
    }

    // ===== Rendering =====
    function renderSentence(){
      sentenceEl.innerHTML = "";
      if (phrase.length === 0){
        const p = document.createElement("span");
        p.className = "placeholder";
        p.textContent = "Select a tile or type with the keyboard‚Ä¶";
        sentenceEl.appendChild(p);
        return;
      }
      for (const w of phrase){
        const chip = document.createElement("span");
        chip.className = "chip";
        chip.innerHTML = `<span class="mini" aria-hidden="true">üí¨</span>${escapeHtml(w)}`;
        sentenceEl.appendChild(chip);
      }
    }

    function renderTyped(){
      typedBoxEl.innerHTML = "";
      if (!typed){
        const p = document.createElement("span");
        p.className = "placeholder";
        p.textContent = "Type here with the on-screen keyboard‚Ä¶";
        typedBoxEl.appendChild(p);
        return;
      }
      const chip = document.createElement("span");
      chip.className = "chip";
      chip.innerHTML = `<span class="mini" aria-hidden="true">‚å®Ô∏è</span>${escapeHtml(typed)}`;
      typedBoxEl.appendChild(chip);
    }

    function escapeHtml(str){
      return String(str)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    // ===== Actions =====
    function addWord(word){
      if (!word) return;
      phrase.push(word);
      renderSentence();
    }

    function insertPhrase(text){
      // Insert multi-word phrase as separate chips
      const parts = text.split(/\s+/).filter(Boolean);
      for (const p of parts) phrase.push(p);
      renderSentence();
    }

    function undo(){
      // If typed has content, backspace typed first; else pop phrase
      if (typed.length > 0){
        typed = typed.slice(0, -1);
        renderTyped();
        return;
      }
      phrase.pop();
      renderSentence();
    }

    function clearAll(){
      phrase.length = 0;
      typed = "";
      window.speechSynthesis?.cancel?.();
      renderSentence();
      renderTyped();
    }

    function speak(text){
      if (!text) return;
      if (!("speechSynthesis" in window)){
        alert(text);
        return;
      }
      window.speechSynthesis.cancel();
      const u = new SpeechSynthesisUtterance(text);
      u.rate = 1;
      window.speechSynthesis.speak(u);
    }

    function speakCurrent(){
      const full = [...phrase, ...(typed ? [typed] : [])].join(" ").trim();
      speak(full);
    }

    // ===== Tile clicks =====
    document.getElementById("grid").addEventListener("click", (e) => {
      const tile = e.target.closest(".tile");
      if (!tile) return;
      addWord(tile.dataset.word);
    });

    // ===== Controls =====
    btnSpeak.addEventListener("click", speakCurrent);
    btnSpeakHero.addEventListener("click", speakCurrent);
    btnUndo.addEventListener("click", undo);
    btnClear.addEventListener("click", clearAll);

    // ===== Keyboard builder =====
    const keyboardLayout = [
      ["Q","W","E","R","T","Y","U","I","O","P"],
      ["A","S","D","F","G","H","J","K","L"],
      ["Z","X","C","V","B","N","M"],
    ];

    function addKey(container, label, onClick, className){
      const k = document.createElement("div");
      k.className = "key" + (className ? " " + className : "");
      k.textContent = label;
      k.tabIndex = 0;
      k.setAttribute("role","button");
      k.addEventListener("click", onClick);
      k.addEventListener("keydown", (ev) => {
        if (ev.key === "Enter" || ev.key === " ") {
          ev.preventDefault();
          onClick();
        }
      });
      container.appendChild(k);
    }

    function buildKeyboard(){
      const kbd = document.getElementById("kbd");
      kbd.innerHTML = "";

      for (const row of keyboardLayout){
        const r = document.createElement("div");
        r.className = "kbdRow";
        for (const letter of row){
          addKey(r, letter, () => { typed += letter.toLowerCase(); renderTyped(); });
        }
        kbd.appendChild(r);
      }

      const r2 = document.createElement("div");
      r2.className = "kbdRow";
      addKey(r2, "Space", () => { typed += " "; renderTyped(); }, "xwide");
      addKey(r2, "Backspace", () => { typed = typed.slice(0,-1); renderTyped(); }, "wide");
      addKey(r2, "Enter", () => {
        const cleaned = typed.trim();
        if (cleaned) addWord(cleaned);
        typed = "";
        renderTyped();
      }, "wide");
      kbd.appendChild(r2);
    }

    // ===== Init =====
    renderSuggestions();
    buildKeyboard();
    renderSentence();
    renderTyped();
  </script>
</body>
</html>
